TWA.addCheckbox = function() {	console.log('TWA.addCheckbox()');		var table, tr;		if ( game_data.mode === 'commands' || game_data.mode === 'incomings' || game_data.mode === 'groups' ) {		return;	} else if ( game_data.mode === 'units' ) {		table = document.getElementById( 'units_table' );				var tbody = table.getElementsByTagName( 'tbody' ),			th = table.getElementsByTagName( 'th' )[ 0 ],			tbodyTr;				th.innerHTML = '<input type="checkbox" style="margin:0px" id="twa-selectAll"/> ' + th.innerHTML;				for ( var i = 0; i < tbody.length; i++ ) {			tbodyTr = tbody[ i ].getElementsByTagName( 'tr' )[ 0 ];			tbodyTr.getElementsByTagName( 'td' )[ 0 ].innerHTML = '<input type="checkbox" name="village_ids[]" class="addcheckbox" style="margin:0px" value="' + jQuery( 'a[href*="village="]:first', tbody[ i ] )[ 0 ].href.match( /village=(\d+)/ )[ 1 ] + '"/>' + tbodyTr.getElementsByTagName( 'td' )[ 0 ].innerHTML;		}	} else {		tr = jQuery( '.overview_table' )[ 0 ].getElementsByTagName( 'tr' );				for ( var i = 0; i < tr.length; i++ ) {			tr[ i ].innerHTML = ( !i ? '<th><input type="checkbox" style="margin:0px" id="twa-selectAll"/></th>' : '<td><input type="checkbox" name="village_ids[]" class="addcheckbox" style="margin:0px" value="' + jQuery( 'a[href*="village="]:first', tr[ i ] )[ 0 ].href.match( /village=(\d+)/ )[ 1 ] + '"/></td>' ) + tr[ i ].innerHTML;		}	}		document.getElementById( 'twa-selectAll' ).onclick = function() {		jQuery( 'input.addcheckbox:visible' ).attr( 'checked', this.checked );	};};